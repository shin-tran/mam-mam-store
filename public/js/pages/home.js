function a7_0x540b(_0x152c8d,_0x2f0279){const _0x3cc56b=a7_0x3cc5();return a7_0x540b=function(_0x540b2d,_0x22f297){_0x540b2d=_0x540b2d-0x97;let _0xc4ec4e=_0x3cc56b[_0x540b2d];return _0xc4ec4e;},a7_0x540b(_0x152c8d,_0x2f0279);}function a7_0x3cc5(){const _0xf20698=['message','https://fluffy-telegram-r79rvrrrr4h6gw-80.app.github.dev/doan-phpcoban','/api/forgot-password','Đã\x20xảy\x20ra\x20lỗi\x20từ\x20refresh\x20token\x20API','logout','removeItem','Bearer\x20','expires_in','exports','email','isLoggedIn','Lấy\x20token\x20thất\x20bại.\x20Đăng\x20xuất.','/api/check-email','set','post','classList','access_token','finally','stopTokenRefreshTimer','4882648KHorvc','phone_number','/api/refresh-token','append','setItem','5202804mVyhhf','then','checkEmailExists','refreshTimeoutId','json','hidden','resetPassword','491868pLmmKU','isPhone','headers','click','exists','+84','register','add','Lỗi\x20khi\x20gọi\x20API\x20logout:','/api/reset-password','/api/login','4800075QPMVjt','data','22283129gdCTNL','clearError','3sBaJkh','2225378wCJiRJ','refreshTokenPromise','scheduleNextTokenRefresh','Authorization','success','fetchWithAuth','20jgVBti','/api/check-phone-number','accessToken','login','token_expires_at','now','/api/register','startsWith','redirect','status','querySelector','9DeMIFv','getItem','log','defineProperty','error','.error-log[data-field=\x22','1140144Aajmhk','7hAJfzE','hasOwnProperty','refreshToken','remove','/api/logout','POST','/login','test','displayError'];a7_0x3cc5=function(){return _0xf20698;};return a7_0x3cc5();}(function(_0xbe231b,_0x31ea75){const _0xe347a=a7_0x540b,_0x1dcdbd=_0xbe231b();while(!![]){try{const _0x2d2dab=-parseInt(_0xe347a(0xa7))/0x1+parseInt(_0xe347a(0xe0))/0x2*(-parseInt(_0xe347a(0xdf))/0x3)+parseInt(_0xe347a(0xd0))/0x4+-parseInt(_0xe347a(0xdb))/0x5+-parseInt(_0xe347a(0xc9))/0x6*(parseInt(_0xe347a(0xa8))/0x7)+-parseInt(_0xe347a(0xc4))/0x8*(-parseInt(_0xe347a(0xa1))/0x9)+parseInt(_0xe347a(0xe6))/0xa*(parseInt(_0xe347a(0xdd))/0xb);if(_0x2d2dab===_0x31ea75)break;else _0x1dcdbd['push'](_0x1dcdbd['shift']());}catch(_0x540806){_0x1dcdbd['push'](_0x1dcdbd['shift']());}}}(a7_0x3cc5,0xac11a),((()=>{'use strict';const _0xda074e=a7_0x540b;var _0x23d16c={0x31:(_0x103674,_0x5ec0b8,_0x8c4c4a)=>{const _0xffb8f4=a7_0x540b;_0x8c4c4a['d'](_0x5ec0b8,{'M':()=>_0x3d927a});var _0x5bfd58=_0x8c4c4a(0x1ae);class _0x3d927a{static['validateEmail'](_0x3678ea){const _0x5305f5=a7_0x540b;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/[_0x5305f5(0xaf)](_0x3678ea);}static[_0xffb8f4(0xd1)](_0x23f1ba){const _0x2308c0=_0xffb8f4;let _0x230e51=_0x23f1ba['replace'](/[^0-9+]/g,'');return _0x230e51[_0x2308c0(0x9d)](_0x2308c0(0xd5))&&(_0x230e51='0'+_0x230e51['slice'](0x3)),/^(0)(3[2-9]|5[689]|7[06-9]|8[1-689]|9[0-46-9])[0-9]{7}$/[_0x2308c0(0xaf)](_0x230e51);}static['displayError'](_0x52ba54,_0x2dccaf){const _0x38f251=_0xffb8f4,_0x251797=document[_0x38f251(0xa0)](_0x38f251(0xa6)+_0x52ba54+'\x22]');_0x251797&&(''===_0x2dccaf?_0x251797[_0x38f251(0xc0)][_0x38f251(0xd7)]('hidden'):_0x251797[_0x38f251(0xc0)][_0x38f251(0xab)](_0x38f251(0xce)),_0x251797['textContent']=_0x2dccaf);}static[_0xffb8f4(0xde)](_0x5eb156){const _0x5eabbb=_0xffb8f4;this[_0x5eabbb(0xb0)](_0x5eb156,'');}static[_0xffb8f4(0x9e)](_0x331e94=''){window['location']['href']=''+_0x5bfd58['c']+_0x331e94;}}},0x1ae:(_0x12af31,_0x44bb27,_0x512e5a)=>{const _0x58e089=a7_0x540b;_0x512e5a['d'](_0x44bb27,{'c':()=>_0x528dc7});const _0x528dc7=_0x58e089(0xb2);},0x2d0:(_0x15e9fe,_0x30524d,_0x1e48e2)=>{const _0x5d79a7=a7_0x540b;_0x1e48e2['d'](_0x30524d,{'y':()=>_0x7c5dad});var _0x57ce8e=_0x1e48e2(0x1ae),_0x4b3178=_0x1e48e2(0x31);const _0x7c5dad=new class{[_0x5d79a7(0x98)]=null;[_0x5d79a7(0xe1)]=null;['refreshTimeoutId']=null;constructor(){const _0x64aff8=_0x5d79a7;this['accessToken']=localStorage[_0x64aff8(0xa2)](_0x64aff8(0xc1)),this[_0x64aff8(0xe2)]();}async[_0x5d79a7(0xcb)](_0x55bd81){const _0x2c57e1=_0x5d79a7,_0x49acaa=new FormData();_0x49acaa[_0x2c57e1(0xc7)](_0x2c57e1(0xba),_0x55bd81);const _0x10ddda=_0x57ce8e['c']+_0x2c57e1(0xbd);try{const _0x30d34f=await fetch(_0x10ddda,{'method':_0x2c57e1(0xbf),'body':_0x49acaa})['then'](_0x154732=>_0x154732[_0x2c57e1(0xcd)]());return!!_0x30d34f[_0x2c57e1(0xe4)]&&_0x30d34f[_0x2c57e1(0xdc)][_0x2c57e1(0xd4)];}catch(_0x3d765c){console[_0x2c57e1(0xa5)](_0x3d765c);}}async['checkPhoneNumberExists'](_0x82718a){const _0x409073=_0x5d79a7,_0x4cab06=new FormData();_0x4cab06[_0x409073(0xc7)](_0x409073(0xc5),_0x82718a);const _0xe54042=_0x57ce8e['c']+_0x409073(0x97);try{const _0x2bd5e9=await fetch(_0xe54042,{'method':'post','body':_0x4cab06})[_0x409073(0xca)](_0x353c06=>_0x353c06[_0x409073(0xcd)]());return!!_0x2bd5e9['success']&&_0x2bd5e9[_0x409073(0xdc)][_0x409073(0xd4)];}catch(_0x183deb){console['error'](_0x183deb);}}[_0x5d79a7(0xbb)](){return null!==this['accessToken'];}async[_0x5d79a7(0xd6)](_0x412b1){const _0x517318=_0x5d79a7,_0xc3d7bf=_0x57ce8e['c']+_0x517318(0x9c);return await fetch(_0xc3d7bf,{'method':_0x517318(0xbf),'body':_0x412b1})[_0x517318(0xca)](_0x49138c=>_0x49138c['json']());}async['activateAccount'](_0x553088){const _0x2c0ea7=_0x5d79a7,_0x5eda83=_0x57ce8e['c']+'/api/activate';return await fetch(_0x5eda83,{'method':_0x2c0ea7(0xbf),'body':_0x553088})[_0x2c0ea7(0xca)](_0x5a486a=>_0x5a486a[_0x2c0ea7(0xcd)]());}async[_0x5d79a7(0x99)](_0x58c66e){const _0x2b6d32=_0x5d79a7,_0x303075=_0x57ce8e['c']+_0x2b6d32(0xda),_0xdea91e=await fetch(_0x303075,{'method':_0x2b6d32(0xbf),'body':_0x58c66e})['then'](_0x340cc3=>_0x340cc3['json']());return _0xdea91e[_0x2b6d32(0xe4)]&&(this[_0x2b6d32(0x98)]=_0xdea91e['data'][_0x2b6d32(0xc1)],localStorage[_0x2b6d32(0xc8)](_0x2b6d32(0xc1),_0xdea91e[_0x2b6d32(0xdc)]['access_token']),localStorage[_0x2b6d32(0xc8)](_0x2b6d32(0x9a),String(_0xdea91e[_0x2b6d32(0xdc)][_0x2b6d32(0xb8)]))),_0xdea91e;}async['forgotPassword'](_0x1523ac){const _0x28b607=_0x5d79a7,_0x57a22b=_0x57ce8e['c']+_0x28b607(0xb3);return await fetch(_0x57a22b,{'method':'post','body':_0x1523ac})[_0x28b607(0xca)](_0x2d60fc=>_0x2d60fc[_0x28b607(0xcd)]());}async[_0x5d79a7(0xcf)](_0x481cdf){const _0x3a2d04=_0x5d79a7,_0x2c005d=_0x57ce8e['c']+_0x3a2d04(0xd9);return await fetch(_0x2c005d,{'method':'post','body':_0x481cdf})[_0x3a2d04(0xca)](_0x4fd14b=>_0x4fd14b[_0x3a2d04(0xcd)]());}async['logout'](){const _0x316d97=_0x5d79a7,_0x274a21=this['accessToken'];this[_0x316d97(0x98)]=null,this[_0x316d97(0xc3)](),localStorage['removeItem'](_0x316d97(0xc1)),localStorage[_0x316d97(0xb6)]('token_expires_at');try{const _0x4e1e41=_0x57ce8e['c']+_0x316d97(0xac);await fetch(_0x4e1e41,{'method':'post','headers':{'Authorization':_0x316d97(0xb7)+_0x274a21}})[_0x316d97(0xca)](_0x599eb9=>_0x599eb9[_0x316d97(0xcd)]());}catch(_0x45bad3){console[_0x316d97(0xa5)](_0x316d97(0xd8),_0x45bad3);}_0x4b3178['M'][_0x316d97(0x9e)]('/login');}async[_0x5d79a7(0xe5)](_0x37c424,_0x1a0621={}){const _0xb405e4=_0x5d79a7,_0x188552=this[_0xb405e4(0x98)],_0x1aa3b2=new Headers(_0x1a0621[_0xb405e4(0xd2)]||{});_0x188552&&_0x1aa3b2[_0xb405e4(0xbe)](_0xb405e4(0xe3),_0xb405e4(0xb7)+_0x188552),_0x1a0621[_0xb405e4(0xd2)]=_0x1aa3b2;let _0x300c57=await fetch(_0x37c424,_0x1a0621);if(0x191===_0x300c57[_0xb405e4(0x9f)])try{const _0xdecabb=await this['refreshToken']();_0x1aa3b2[_0xb405e4(0xbe)]('Authorization','Bearer\x20'+_0xdecabb),_0x1a0621['headers']=_0x1aa3b2,console[_0xb405e4(0xa3)]('Token\x20refreshed.\x20Retrying\x20the\x20original\x20request...'),_0x300c57=await fetch(_0x37c424,_0x1a0621);}catch(_0x39268f){console[_0xb405e4(0xa5)](_0xb405e4(0xbc),_0x39268f),this['logout'](),_0x4b3178['M'][_0xb405e4(0x9e)](_0xb405e4(0xae));}return _0x300c57;}async[_0x5d79a7(0xaa)](){const _0x529901=_0x5d79a7;if(!this[_0x529901(0xe1)]){const _0x464a23=_0x57ce8e['c']+_0x529901(0xc6);this[_0x529901(0xe1)]=fetch(_0x464a23,{'method':_0x529901(0xad)})['then'](async _0x2b1ee0=>{const _0x3de772=_0x529901;if(!_0x2b1ee0['ok'])throw new Error('Refresh\x20token\x20không\x20hợp\x20lệ\x20hoặc\x20đã\x20hết\x20hạn.');const _0x1eb021=await _0x2b1ee0[_0x3de772(0xcd)]();if(_0x1eb021[_0x3de772(0xe4)])return this['accessToken']=_0x1eb021['data'][_0x3de772(0xc1)],localStorage[_0x3de772(0xc8)]('access_token',this[_0x3de772(0x98)]),localStorage[_0x3de772(0xc8)](_0x3de772(0x9a),String(_0x1eb021[_0x3de772(0xdc)][_0x3de772(0xb8)])),this[_0x3de772(0xe2)](),this[_0x3de772(0x98)];throw new Error(_0x1eb021[_0x3de772(0xb1)]||_0x3de772(0xb4));})[_0x529901(0xc2)](()=>{const _0x3782fc=_0x529901;this[_0x3782fc(0xe1)]=null;});}return this[_0x529901(0xe1)];}['stopTokenRefreshTimer'](){const _0x2f2e17=_0x5d79a7;this[_0x2f2e17(0xcc)]&&(clearTimeout(this['refreshTimeoutId']),this[_0x2f2e17(0xcc)]=null);}async[_0x5d79a7(0xe2)](){const _0x30aaba=_0x5d79a7;this[_0x30aaba(0xc3)]();const _0x27f60a=localStorage[_0x30aaba(0xa2)](_0x30aaba(0x9a));if(!_0x27f60a)return;const _0x5bf410=0x3e8*parseInt(_0x27f60a,0xa)-Date[_0x30aaba(0x9b)]()-0xea60;if(_0x5bf410>0x0)this[_0x30aaba(0xcc)]=setTimeout(async()=>{const _0x2c6bf1=_0x30aaba;try{await this[_0x2c6bf1(0xaa)]();}catch(_0x302eb2){this[_0x2c6bf1(0xb5)]();}},_0x5bf410);else try{await this['refreshToken']();}catch(_0x4215da){this['logout']();}}}();}},_0x43425e={};function _0x1ab91e(_0x7cb1f3){const _0x993c4b=a7_0x540b;var _0x1d4583=_0x43425e[_0x7cb1f3];if(void 0x0!==_0x1d4583)return _0x1d4583[_0x993c4b(0xb9)];var _0x5a5568=_0x43425e[_0x7cb1f3]={'exports':{}};return _0x23d16c[_0x7cb1f3](_0x5a5568,_0x5a5568[_0x993c4b(0xb9)],_0x1ab91e),_0x5a5568[_0x993c4b(0xb9)];}_0x1ab91e['d']=(_0x35ba02,_0x1327b3)=>{const _0x38379c=a7_0x540b;for(var _0x4cc89a in _0x1327b3)_0x1ab91e['o'](_0x1327b3,_0x4cc89a)&&!_0x1ab91e['o'](_0x35ba02,_0x4cc89a)&&Object[_0x38379c(0xa4)](_0x35ba02,_0x4cc89a,{'enumerable':!0x0,'get':_0x1327b3[_0x4cc89a]});},_0x1ab91e['o']=(_0x5a8a8b,_0xff5836)=>Object['prototype'][_0xda074e(0xa9)]['call'](_0x5a8a8b,_0xff5836);var _0x495c95=_0x1ab91e(0x2d0);const _0x1ce406=document['getElementById']('btn-logout');_0x1ce406?.['addEventListener'](_0xda074e(0xd3),async()=>{const _0x227625=_0xda074e;await _0x495c95['y'][_0x227625(0xb5)]();});})()));