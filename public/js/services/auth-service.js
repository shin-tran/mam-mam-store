(function(_0x334e27,_0x1d52df){const _0x128e35=a5_0x3f28,_0x648982=_0x334e27();while(!![]){try{const _0x1f0048=-parseInt(_0x128e35(0xa4))/0x1*(parseInt(_0x128e35(0xa8))/0x2)+-parseInt(_0x128e35(0xa2))/0x3*(-parseInt(_0x128e35(0x95))/0x4)+-parseInt(_0x128e35(0xaa))/0x5+parseInt(_0x128e35(0xc1))/0x6*(parseInt(_0x128e35(0xa9))/0x7)+-parseInt(_0x128e35(0xb0))/0x8*(-parseInt(_0x128e35(0xc7))/0x9)+-parseInt(_0x128e35(0xa6))/0xa*(parseInt(_0x128e35(0x96))/0xb)+-parseInt(_0x128e35(0x82))/0xc*(-parseInt(_0x128e35(0x97))/0xd);if(_0x1f0048===_0x1d52df)break;else _0x648982['push'](_0x648982['shift']());}catch(_0x155f9e){_0x648982['push'](_0x648982['shift']());}}}(a5_0x4bc3,0x28be5),((()=>{'use strict';const _0x99f6c7=a5_0x3f28;var _0x27fda0={0x31:(_0x22898b,_0x2c23ce,_0x1e6b81)=>{const _0x3c1d99=a5_0x3f28;_0x1e6b81['d'](_0x2c23ce,{'M':()=>_0x409a33});var _0x4866d4=_0x1e6b81(0x1ae);class _0x409a33{static['validateEmail'](_0x304677){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/['test'](_0x304677);}static[_0x3c1d99(0xb8)](_0x54515b){const _0x164856=_0x3c1d99;let _0x208f41=_0x54515b[_0x164856(0x86)](/[^0-9+]/g,'');return _0x208f41[_0x164856(0x80)]('+84')&&(_0x208f41='0'+_0x208f41[_0x164856(0x9f)](0x3)),/^(0)(3[2-9]|5[689]|7[06-9]|8[1-689]|9[0-46-9])[0-9]{7}$/[_0x164856(0xb1)](_0x208f41);}static[_0x3c1d99(0x8e)](_0x24db0b,_0x5dbd35){const _0x32df14=_0x3c1d99,_0x2f0484=document[_0x32df14(0x83)]('.error-log[data-field=\x22'+_0x24db0b+'\x22]');_0x2f0484&&(''===_0x5dbd35?_0x2f0484[_0x32df14(0xb3)]['add'](_0x32df14(0x90)):_0x2f0484[_0x32df14(0xb3)][_0x32df14(0xcd)](_0x32df14(0x90)),_0x2f0484[_0x32df14(0x93)]=_0x5dbd35);}static['clearError'](_0x1ba151){const _0x451794=_0x3c1d99;this[_0x451794(0x8e)](_0x1ba151,'');}static[_0x3c1d99(0xbd)](_0xebc08a=''){const _0x4f10e6=_0x3c1d99;window['location'][_0x4f10e6(0x81)]=''+_0x4866d4['c']+_0xebc08a;}}},0x1ae:(_0x418420,_0x3a7bb7,_0x4b9c29)=>{const _0x3c87d6=a5_0x3f28;_0x4b9c29['d'](_0x3a7bb7,{'c':()=>_0x36d0da});const _0x36d0da=_0x3c87d6(0xab);}},_0x8998b7={};function _0x6548f(_0x50c847){const _0x304276=a5_0x3f28;var _0x449d1e=_0x8998b7[_0x50c847];if(void 0x0!==_0x449d1e)return _0x449d1e[_0x304276(0x87)];var _0x26998b=_0x8998b7[_0x50c847]={'exports':{}};return _0x27fda0[_0x50c847](_0x26998b,_0x26998b[_0x304276(0x87)],_0x6548f),_0x26998b[_0x304276(0x87)];}_0x6548f['d']=(_0x56dd5f,_0x707150)=>{for(var _0x3a680a in _0x707150)_0x6548f['o'](_0x707150,_0x3a680a)&&!_0x6548f['o'](_0x56dd5f,_0x3a680a)&&Object['defineProperty'](_0x56dd5f,_0x3a680a,{'enumerable':!0x0,'get':_0x707150[_0x3a680a]});},_0x6548f['o']=(_0x34c1a0,_0x29e906)=>Object[_0x99f6c7(0xcb)][_0x99f6c7(0xc6)][_0x99f6c7(0xc2)](_0x34c1a0,_0x29e906);var _0x1eaa5c=_0x6548f(0x1ae),_0x3d383d=_0x6548f(0x31);new class{[_0x99f6c7(0xa5)]=null;['refreshTokenPromise']=null;['refreshTimeoutId']=null;constructor(){const _0x218f72=_0x99f6c7;this[_0x218f72(0xa5)]=localStorage[_0x218f72(0x8f)]('access_token'),this[_0x218f72(0x9e)]();}async['checkEmailExists'](_0x186f88){const _0x5b0f06=_0x99f6c7,_0x312ffd=new FormData();_0x312ffd[_0x5b0f06(0x7f)](_0x5b0f06(0x8d),_0x186f88);const _0x5ac0a1=_0x1eaa5c['c']+'/api/check-email';try{const _0x2db5d0=await fetch(_0x5ac0a1,{'method':_0x5b0f06(0x9d),'body':_0x312ffd})['then'](_0x33aa7a=>_0x33aa7a['json']());return!!_0x2db5d0[_0x5b0f06(0xcc)]&&_0x2db5d0[_0x5b0f06(0xb7)][_0x5b0f06(0x8b)];}catch(_0x555a75){console[_0x5b0f06(0xbb)](_0x555a75);}}async[_0x99f6c7(0xb4)](_0x153bce){const _0x1c0b16=_0x99f6c7,_0x2d4b60=new FormData();_0x2d4b60[_0x1c0b16(0x7f)]('phone_number',_0x153bce);const _0x1bcc51=_0x1eaa5c['c']+'/api/check-phone-number';try{const _0x22ef46=await fetch(_0x1bcc51,{'method':'post','body':_0x2d4b60})['then'](_0x4829f7=>_0x4829f7[_0x1c0b16(0x88)]());return!!_0x22ef46[_0x1c0b16(0xcc)]&&_0x22ef46['data']['exists'];}catch(_0x5d4b95){console[_0x1c0b16(0xbb)](_0x5d4b95);}}[_0x99f6c7(0x84)](){return null!==this['accessToken'];}async[_0x99f6c7(0x91)](_0x4d6e90){const _0x2d9e75=_0x99f6c7,_0x22702c=_0x1eaa5c['c']+_0x2d9e75(0xc0);return await fetch(_0x22702c,{'method':_0x2d9e75(0x9d),'body':_0x4d6e90})[_0x2d9e75(0xac)](_0xb97118=>_0xb97118[_0x2d9e75(0x88)]());}async['activateAccount'](_0x5ab3bb){const _0x5a5a5d=_0x99f6c7,_0xef54a4=_0x1eaa5c['c']+_0x5a5a5d(0xc4);return await fetch(_0xef54a4,{'method':_0x5a5a5d(0x9d),'body':_0x5ab3bb})[_0x5a5a5d(0xac)](_0x2da458=>_0x2da458['json']());}async[_0x99f6c7(0x85)](_0xff63cc){const _0x1d7875=_0x99f6c7,_0x36a7f5=_0x1eaa5c['c']+_0x1d7875(0x92),_0x7d653f=await fetch(_0x36a7f5,{'method':'post','body':_0xff63cc})[_0x1d7875(0xac)](_0x1782a8=>_0x1782a8[_0x1d7875(0x88)]());return _0x7d653f[_0x1d7875(0xcc)]&&(this[_0x1d7875(0xa5)]=_0x7d653f[_0x1d7875(0xb7)][_0x1d7875(0xa1)],localStorage[_0x1d7875(0x8a)](_0x1d7875(0xa1),_0x7d653f['data']['access_token']),localStorage[_0x1d7875(0x8a)](_0x1d7875(0xba),String(_0x7d653f[_0x1d7875(0xb7)][_0x1d7875(0x99)]))),_0x7d653f;}async[_0x99f6c7(0x98)](_0xbd1585){const _0x4ce774=_0x99f6c7,_0x1b7115=_0x1eaa5c['c']+_0x4ce774(0xbe);return await fetch(_0x1b7115,{'method':'post','body':_0xbd1585})['then'](_0x5876e6=>_0x5876e6[_0x4ce774(0x88)]());}async[_0x99f6c7(0xa0)](_0x47df7e){const _0x544ca6=_0x99f6c7,_0x3e737a=_0x1eaa5c['c']+_0x544ca6(0xc9);return await fetch(_0x3e737a,{'method':_0x544ca6(0x9d),'body':_0x47df7e})['then'](_0x3a9eaa=>_0x3a9eaa[_0x544ca6(0x88)]());}async[_0x99f6c7(0xa7)](){const _0x2a3259=_0x99f6c7,_0x4d57a6=this[_0x2a3259(0xa5)];this[_0x2a3259(0xa5)]=null,this[_0x2a3259(0x89)](),localStorage[_0x2a3259(0xb6)](_0x2a3259(0xa1)),localStorage[_0x2a3259(0xb6)](_0x2a3259(0xba));try{const _0xc0384=_0x1eaa5c['c']+_0x2a3259(0xca);await fetch(_0xc0384,{'method':'post','headers':{'Authorization':_0x2a3259(0x94)+_0x4d57a6}})[_0x2a3259(0xac)](_0x9efd86=>_0x9efd86['json']());}catch(_0x301921){console[_0x2a3259(0xbb)]('Lỗi\x20khi\x20gọi\x20API\x20logout:',_0x301921);}_0x3d383d['M'][_0x2a3259(0xbd)]('/login');}async[_0x99f6c7(0xaf)](_0x3c8a5c,_0x462771={}){const _0x20d2ee=_0x99f6c7,_0x2b6d38=this[_0x20d2ee(0xa5)],_0x4a8137=new Headers(_0x462771[_0x20d2ee(0x9c)]||{});_0x2b6d38&&_0x4a8137['set']('Authorization',_0x20d2ee(0x94)+_0x2b6d38),_0x462771[_0x20d2ee(0x9c)]=_0x4a8137;let _0x51c69e=await fetch(_0x3c8a5c,_0x462771);if(0x191===_0x51c69e['status'])try{const _0x1bb39a=await this[_0x20d2ee(0xb2)]();_0x4a8137[_0x20d2ee(0x8c)](_0x20d2ee(0xbf),_0x20d2ee(0x94)+_0x1bb39a),_0x462771['headers']=_0x4a8137,console[_0x20d2ee(0xc8)](_0x20d2ee(0xc3)),_0x51c69e=await fetch(_0x3c8a5c,_0x462771);}catch(_0x39cec8){console['error'](_0x20d2ee(0xae),_0x39cec8),this[_0x20d2ee(0xa7)](),_0x3d383d['M']['redirect'](_0x20d2ee(0xb5));}return _0x51c69e;}async[_0x99f6c7(0xb2)](){const _0xabc7d=_0x99f6c7;if(!this[_0xabc7d(0xb9)]){const _0x5e54cb=_0x1eaa5c['c']+_0xabc7d(0xbc);this[_0xabc7d(0xb9)]=fetch(_0x5e54cb,{'method':_0xabc7d(0x9b)})[_0xabc7d(0xac)](async _0x570810=>{const _0x5bcd44=_0xabc7d;if(!_0x570810['ok'])throw new Error(_0x5bcd44(0xc5));const _0x247f07=await _0x570810[_0x5bcd44(0x88)]();if(_0x247f07[_0x5bcd44(0xcc)])return this[_0x5bcd44(0xa5)]=_0x247f07[_0x5bcd44(0xb7)]['access_token'],localStorage[_0x5bcd44(0x8a)](_0x5bcd44(0xa1),this[_0x5bcd44(0xa5)]),localStorage[_0x5bcd44(0x8a)]('token_expires_at',String(_0x247f07[_0x5bcd44(0xb7)][_0x5bcd44(0x99)])),this[_0x5bcd44(0x9e)](),this[_0x5bcd44(0xa5)];throw new Error(_0x247f07[_0x5bcd44(0xa3)]||_0x5bcd44(0xce));})['finally'](()=>{const _0x5aa3e9=_0xabc7d;this[_0x5aa3e9(0xb9)]=null;});}return this[_0xabc7d(0xb9)];}[_0x99f6c7(0x89)](){const _0x3af472=_0x99f6c7;this[_0x3af472(0x9a)]&&(clearTimeout(this[_0x3af472(0x9a)]),this[_0x3af472(0x9a)]=null);}async['scheduleNextTokenRefresh'](){const _0x5976dd=_0x99f6c7;this[_0x5976dd(0x89)]();const _0x30e8cc=localStorage['getItem']('token_expires_at');if(!_0x30e8cc)return;const _0x27d40e=0x3e8*parseInt(_0x30e8cc,0xa)-Date[_0x5976dd(0xad)]()-0xea60;if(_0x27d40e>0x0)this[_0x5976dd(0x9a)]=setTimeout(async()=>{const _0x407705=_0x5976dd;try{await this[_0x407705(0xb2)]();}catch(_0x1f5890){this[_0x407705(0xa7)]();}},_0x27d40e);else try{await this[_0x5976dd(0xb2)]();}catch(_0x3944d1){this['logout']();}}}();})()));function a5_0x3f28(_0x2c289b,_0x55ad8e){const _0x4bc313=a5_0x4bc3();return a5_0x3f28=function(_0x3f28fe,_0xae3e57){_0x3f28fe=_0x3f28fe-0x7f;let _0x11a154=_0x4bc313[_0x3f28fe];return _0x11a154;},a5_0x3f28(_0x2c289b,_0x55ad8e);}function a5_0x4bc3(){const _0x1a3257=['href','1936524QyAdhK','querySelector','isLoggedIn','login','replace','exports','json','stopTokenRefreshTimer','setItem','exists','set','email','displayError','getItem','hidden','register','/api/login','textContent','Bearer\x20','4mSCdau','99ACkpPy','26bBmOqQ','forgotPassword','expires_in','refreshTimeoutId','POST','headers','post','scheduleNextTokenRefresh','slice','resetPassword','access_token','628491xIciDJ','message','1OXGAND','accessToken','49690syFzDX','logout','521530CdSauv','119DCoojq','943300MZoiJE','https://fluffy-telegram-r79rvrrrr4h6gw-80.app.github.dev/doan-phpcoban','then','now','Lấy\x20token\x20thất\x20bại.\x20Đăng\x20xuất.','fetchWithAuth','56Eqdgoi','test','refreshToken','classList','checkPhoneNumberExists','/login','removeItem','data','isPhone','refreshTokenPromise','token_expires_at','error','/api/refresh-token','redirect','/api/forgot-password','Authorization','/api/register','8346FfxgFk','call','Token\x20refreshed.\x20Retrying\x20the\x20original\x20request...','/api/activate','Refresh\x20token\x20không\x20hợp\x20lệ\x20hoặc\x20đã\x20hết\x20hạn.','hasOwnProperty','135171VfFfBH','log','/api/reset-password','/api/logout','prototype','success','remove','Đã\x20xảy\x20ra\x20lỗi\x20từ\x20refresh\x20token\x20API','append','startsWith'];a5_0x4bc3=function(){return _0x1a3257;};return a5_0x4bc3();}